Bootstrap: docker
From: ubuntu:22.04

%post
    # Set environment
    export DEBIAN_FRONTEND=noninteractive
    
    # Update and install system packages
    apt-get update
    apt-get install -y python3 python3-pip python3-dev dssp wget curl build-essential
    apt-get clean
    rm -rf /var/lib/apt/lists/*
    
    # Create symbolic link for DSSP
    ln -sf /usr/bin/mkdssp /usr/bin/dssp
    
    # Install Python packages
    python3 -m pip install --upgrade pip
    pip3 install biopython==1.81 pandas==2.1.4 numpy==1.24.3 scipy==1.11.4
    
    # Create directories
    mkdir -p /app/new_pdb /app/new_pdb

%runscript
    echo "Container ready! Mount your directories and run your script."
    echo "Usage: singularity exec --bind ./new_pdb:/app/new_pdb,./new_pdb:/app/new_pdb container.sif python3 /gpfs01/home/ppxnp3/pdb_analysis/pdb_analysis.py"

%environment
    export PYTHONUNBUFFERED=1